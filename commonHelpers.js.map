{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nconst BASE_URI = 'https://pixabay.com/api/';\nconst KEY = '42459298-1821cc9c9c9d24f5ec127ca7c';\nconst perPage = 15;\n\n\nconst fetchImages = async (userInput, page = 1) => {\n    const searchLink = `${BASE_URI}?key=${KEY}&q=${userInput}&image-type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(searchLink);\n\n        if (!response.data.hits || response.data.hits.length === 0) {\n            iziToast.show({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                messageColor: '#FAFAFB',\n                backgroundColor: '#EF4040',\n                iconColor: '#FAFAFB',\n                position: \"topRight\",\n                theme: 'dark',\n            });\n        }\n\n        if (response.data.totalHits > 0 && page * perPage > response.data.totalHits) {\n            // Кінець колекції\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageColor: '#2E2F42',\n                position: 'topRight',\n                theme: 'light',\n\n            });\n\n            return [];\n\n        }\n\n        return response.data.hits || [];\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw new Error('Image error!');\n    }\n\n};\n\n\nexport { fetchImages, perPage };\n","'use strict'\n\n// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\nconst renderPhotoList = (images, galleryEl) => {\n    if (images.length > 0) {\n        const imageEl = images.map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"gallery-item\">\n                         <a class=\"link\" href=\"${largeImageURL}\">\n                            <img\n                            class=\"gallery-image\"\n                            src=\"${webformatURL}\"\n                            alt=\"${tags}\"\n                            data-source=\"${largeImageURL}\"/>\n                        <div class=\"desc\">\n                            <p class=\"likes\">Likes ${likes}</p>\n                            <p class=\"views\">Views ${views}</p>\n                            <p class=\"comments\">Comments ${comments}</p>\n                            <p class=\"downloads\">Downloads ${downloads}</p>\n                        </div>\n                        </a>\n                    </li>`;\n        }).join('');\n\n        galleryEl.insertAdjacentHTML('beforeend', imageEl);\n        const lightbox = new SimpleLightbox('.gallery-item a');\n\n        lightbox.refresh();\n    } else {\n        console.log('Error');\n    }\n}\n\nexport default renderPhotoList;\n\n\n\n","'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios, { formToJSON } from 'axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport './css/loader.css';\nimport { fetchImages, perPage } from './js/pixabay-api'\nimport renderPhotoList from './js/render-functions';\n\nconst searchForm = document.getElementById('search-form');\nconst inputField = document.querySelector('.searchInput');\nconst galleryEl = document.querySelector('.image-gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\n/*Створення loader*/\nconst loader = document.createElement('span')\nloader.classList.add('loader');\n\nlet currentPage = 1;\nlet currentQuery = '';\n\nfunction clearGallery() {\n    galleryEl.innerHTML = '';\n}\n/*Функції приховування та показу кнопок і loader*/\nfunction showLoadMoreButton() {\n    loadMoreBtn.style.display = 'block';\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n};\n\nhideLoader();\nhideLoadMoreButton();\n\nfunction resetPage() {\n    currentPage = 1;\n}\n/*Скрол на вікна*/\nfunction scrollToCardHeight(times) {\n    const firstChild = galleryEl.firstElementChild;\n\n    if (firstChild) {\n        const cardHeight = firstChild.getBoundingClientRect().height;\n        window.scrollBy({ top: times * cardHeight, behavior: 'smooth' });\n    }\n    return\n\n}\n\nsearchForm.addEventListener('submit', async function (event) {\n    event.preventDefault();\n\n    const userInput = inputField.value.trim();\n    currentQuery = userInput;\n    galleryEl.before(loader);\n\n    if (!userInput) {\n        console.log('Please enter a search query before submitting.');\n        return;\n    }\n\n    clearGallery();\n    resetPage();\n    hideLoader();\n\n    try {\n        showLoader();\n        const images = await fetchImages(userInput, currentPage);\n        if (images.length === 0) {\n            hideLoadMoreButton();\n            return;\n        }\n        renderPhotoList(images, galleryEl);\n        scrollToCardHeight(2);\n\n\n        showLoadMoreButton();\n    } catch (error) {\n        console.error('Error:', error);\n    } finally {\n        hideLoader();\n    }\n});\n\n\nasync function handleLoadMore() {\n    let images;\n    currentPage += 1;\n    loadMoreBtn.before(loader);\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n\n        images = await fetchImages(currentQuery, currentPage, perPage);\n        renderPhotoList(images, galleryEl);\n        scrollToCardHeight(2);\n\n\n    } catch (error) {\n        console.error('Error:', error);\n\n    } finally {\n        hideLoader();\n        if (images.length < perPage) {\n            hideLoadMoreButton(); // Приховуємо кнопку \"Load More\"\n        } else {\n            showLoadMoreButton();\n        }\n    }\n}\n\n\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\n"],"names":["BASE_URI","KEY","perPage","fetchImages","userInput","page","searchLink","response","axios","iziToast","error","renderPhotoList","images","galleryEl","imageEl","largeImageURL","webformatURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","inputField","loadMoreBtn","loader","currentPage","currentQuery","clearGallery","showLoadMoreButton","hideLoadMoreButton","showLoader","hideLoader","resetPage","scrollToCardHeight","times","firstChild","cardHeight","event","handleLoadMore"],"mappings":"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"}